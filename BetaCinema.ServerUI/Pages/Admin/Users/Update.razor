@using BetaCinema.Domain.Enums;
@page "/admin/users/edit/{UserId}"
@layout AdminLayout
@inherits UpdateBase

<AuthorizeView Roles="Admin">
    <NotAuthorized>
        <RedirectToLogin />
    </NotAuthorized>
    <Authorized>
        <h3 class="mb-8">@string.Format(SharedResources.UpdateTitle, "người dùng")</h3>

        <EditForm Model="@UserData" OnValidSubmit="@SaveChanges" Context="formContext">
            <DataAnnotationsValidator />
            <MudContainer MaxWidth="MaxWidth.Small">
                <MudCard Class="p-4">
                    <MudCardContent Class="p-0 mb-4 d-flex flex-column gap-2">
                        <MudStack Row>
                            <MudTextField @bind-Value="@UserData.UserName"
                                          Label="@UserResources.UserName"
                                          Variant="Variant.Outlined"
                                          Margin="Margin.Dense" Class="flex-1">
                            </MudTextField>
                            <MudTextField @bind-Value="@UserData.FullName"
                                          Label="@UserResources.FullName"
                                          Variant="Variant.Outlined"
                                          Margin="Margin.Dense" Class="flex-1">
                            </MudTextField>
                        </MudStack>
                        <MudStack Row>
                            <MudTextField @bind-Value="@UserData.Email"
                                          Label="@UserResources.Email"
                                          Variant="Variant.Outlined"
                                          Margin="Margin.Dense" Class="flex-1">
                            </MudTextField>
                            <MudTextField @bind-Value="@UserData.Password"
                                          InputType="@PasswordInput" Label="@UserResources.Password"
                                          Variant="Variant.Outlined" Margin="Margin.Dense" ReadOnly="true"
                                          Adornment="Adornment.End" Class="flex-1"
                                          AdornmentIcon="@PasswordInputIcon" OnAdornmentClick="@ToggleShowPassword"
                                          AdornmentAriaLabel="Show Password">
                            </MudTextField>
                        </MudStack>
                        <MudSelect @bind-Value="@UserData.Role"
                                   T="string"
                                   Label="@UserResources.Role"
                                   AnchorOrigin="Origin.BottomCenter"
                                   Variant="Variant.Outlined"
                                   Margin="Margin.Dense" ReadOnly>
                            <MudSelectItem Value="UserRole.Admin.ToString()" />
                            <MudSelectItem Value="UserRole.Customer.ToString()" />
                        </MudSelect>
                    </MudCardContent>
                    <MudCardActions Class="p-0">
                        <MudButton ButtonType="ButtonType.Submit"
                                   Variant="Variant.Filled"
                                   Color="Color.Primary"
                                   Class="ml-auto">
                            @SharedResources.Update
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudContainer>
        </EditForm>
    </Authorized>
</AuthorizeView>